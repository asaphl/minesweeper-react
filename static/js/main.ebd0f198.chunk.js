(this["webpackJsonpminesweeper-react"]=this["webpackJsonpminesweeper-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),l=a.n(s),o=a(2),i=a(3),c=a(1),u=a(5),m=a(4);a(15);var v=function(e){return r.a.createElement("div",{className:"flag"},r.a.createElement("div",{className:"banner"}),r.a.createElement("div",{className:"pole"}))};var d=function(e){return r.a.createElement("div",{className:"bomb"},r.a.createElement("div",{className:"bomb-body"}),r.a.createElement("div",{className:"bomb-head"}))};var f=function(e){var t=e.flagged,a=e.revealed,n=e.value,s="tile"+(a?" revealed":""),l="";return a&&(n<0&&(l=r.a.createElement(d,null)),n>0&&(l=n)),t&&(l=r.a.createElement(v,null)),r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:s,onClick:function(){e.reveal(e.index)},onContextMenu:function(t){t.preventDefault(),e.toggleFlag(e.index)}},r.a.createElement("span",null,"\xa0",l)),function(){if(e.lastInLine)return r.a.createElement("br",null)}())};function h(e){for(var t=e.rows*e.cols,a=new Array(t).fill(0),n=e.bombs;n>0;){var r=Math.floor(Math.random()*t);if(-1!==a[r])a[r]=-1,n--,b(r,e).forEach((function(e){-1!==a[e]&&(a[e]+=1)}))}return a}function b(e,t){for(var a=t.rows,n=t.cols,r=function(e,t){return Math.floor(e/t)}(e,n),s=function(e,t){return e%t}(e,n),l=[],o=r<a-1?1:0,i=s>0?-1:0,c=s<n-1?1:0,u=r>0?-1:0;u<=o;u++)for(var m=i;m<=c;m++){var v=p(r+u,s+m,n);l.push(v)}return l}function g(e,t,a){var n=[];return 0===t[e]&&(n=function e(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=b(t,a);return s.forEach((function(t){r.includes(t)||(r.push(t),0===n[t]&&e(t,a,n,r))})),r}(e,a,t,[e])),t[e]>0&&(n=[e]),n}function p(e,t,a){return e*a+t}var E=a(9);var S={PLAY:0,WIN:1,LOSE:2},C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={board:h(e.boardSettings),revealed:[],flags:[]},n.revealTile=n.revealTile.bind(Object(c.a)(n)),n.toggleFlag=n.toggleFlag.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){if(e.boardSettings!==this.props.boardSettings||e.gameCounter!==this.props.gameCounter){var t={revealed:[],flags:[],board:h(this.props.boardSettings)};this.setState(t)}}},{key:"revealTile",value:function(e){var t=this.state,a=t.revealed,n=t.board,r=t.flags,s=this.props.boardSettings,l=a.concat(r);if(!l.includes(e))if(-1!==n[e]){var o=function(e,t){var a=new Set(e.concat(t));return Array.from(a)}(a,function(e,t){return e.filter((function(e){return!t.includes(e)}))}(g(e,n,s),l));this.setState({revealed:o})}else this.props.endGame(S.LOSE)}},{key:"revealAll",value:function(){var e,t=this.state.board,a=(e=t.length,new Array(e).fill().map((function(e,t){return t})));this.setState({revealed:a})}},{key:"toggleFlag",value:function(e){var t=this.props,a=t.bombs,n=t.status,r=this.state,s=r.flags,l=r.revealed;if(n===S.PLAY&&!l.includes(e)&&(s.length!==a||s.includes(e))){var o=function(e,t){return t.includes(e)?t.filter((function(t){return!(t===e)})):[].concat(Object(E.a)(t),[e])}(e,s);this.props.updateCounter(o.length),this.setState({flags:o})}}},{key:"checkForWin",value:function(){var e=this.props.boardSettings,t=this.state,a=t.board,n=t.flags,r=t.revealed,s=function(e){return e.rows*e.cols-e.bombs}(e);return(r.length===s||n.length===e.bombs)&&function(e,t){var a=e.sort(),n=t.sort(),r=!0;return a.forEach((function(e,t){r*=e===n[t]})),r}(n.length===e.bombs?n:function(e,t){for(var a=[],n=0;n<t;n++)-1===e.indexOf(n)&&a.push(n);return a}(r,a.length),function(e,t){for(var a=[],n=-1;-1!==(n=e.indexOf(t,n+1));)a.push(n);return a}(a,-1))}},{key:"render",value:function(){var e=this,t=this.props,a=t.status,n=t.boardSettings,s=this.state,l=s.board,o=s.flags,i=s.revealed;a===S.PLAY?this.checkForWin()&&this.props.endGame(S.WIN):i.length!==l.length&&this.revealAll();var c=l.map((function(t,a){return r.a.createElement(f,{key:a,index:a,value:t,revealed:i.includes(a),flagged:o.includes(a),reveal:e.revealTile,toggleFlag:e.toggleFlag,lastInLine:(a+1)%n.cols===0})}));return r.a.createElement("div",{className:"board"},c)}}]),a}(n.Component),y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={time:0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentDidUpdate",value:function(e){e.status!==this.props.status&&(this.props.status===S.PLAY&&this.startTimer(),this.props.status!==S.PLAY&&this.stopTimer())}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"startTimer",value:function(){var e=this;this.setState({time:0}),this.timerID=setInterval((function(){return e.updateTimer()}),1e3)}},{key:"updateTimer",value:function(){var e=this.state.time;this.setState({time:e+1})}},{key:"stopTimer",value:function(){clearInterval(this.timerID)}},{key:"formatTime",value:function(e){var t=Math.floor(e/60),a=e-60*t;return t<10&&(t="0"+t),a<10&&(a="0"+a),t+" : "+a}},{key:"render",value:function(){return r.a.createElement("div",{className:"setting-container"},"Time: ",r.a.createElement("span",{className:"setting-field"},this.formatTime(this.state.time)))}}]),a}(n.Component);var O=function(e){return r.a.createElement("div",{class:"setting-container"},"Bombs ",r.a.createElement("span",{class:"setting-field"},e.remainingFlags))};var k=function(e){var t=this,a=function(t){e.setLevel(t)};return r.a.createElement("div",{class:"setting-container"},"Level \xa0",r.a.createElement("div",{class:"dropdown"},r.a.createElement("span",{className:"dropdown-selected"},e.chosenLevel.level),r.a.createElement("ul",{className:"dropdown-content"},e.levels.map((function(e){return r.a.createElement("li",{onClick:a.bind(t,e)},e.level)})))))};var w=function(e){var t=e.status,a=t===S.PLAY?r.a.createElement(r.a.Fragment,null):t===S.WIN?r.a.createElement("h1",null,"Congratualtions! You Won!"):r.a.createElement("h1",null,"Game Over :(");return r.a.createElement("div",{class:"banner-status"},a)},j=a(6);var L=function(e){return r.a.createElement("div",{class:"flower"},r.a.createElement("div",{class:"petal"}),r.a.createElement("div",{class:"petal"}),r.a.createElement("div",{class:"petal"}),r.a.createElement("div",{class:"petal"}),r.a.createElement("div",{class:"petal"}),r.a.createElement("div",{class:"petal"}),r.a.createElement("div",{class:"petal"}),r.a.createElement("div",{class:"petal"}),r.a.createElement("div",{class:"button"}))};var N=function(e){return r.a.createElement("div",{class:"grass"})},A=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={flowerCoords:n.createRandomCoordsArray(e.flowers),grassCoords:n.createRandomCoordsArray(e.grass)},n}return Object(i.a)(a,[{key:"createRandomCoordsArray",value:function(e){for(var t=[],a=0;a<e;a++)t.push({top:Math.floor(Math.random()*window.innerHeight),left:Math.floor(Math.random()*window.innerWidth)});return t}},{key:"renderDecoration",value:function(e,t){return t.map((function(t){return r.a.createElement("div",{className:"decoration-container",style:Object(j.a)(Object(j.a)({},t),{},{position:"absolute"})},e)}))}},{key:"render",value:function(){var e=this.state,t=e.flowerCoords,a=e.grassCoords;return r.a.createElement(r.a.Fragment,null,this.renderDecoration(r.a.createElement(L,null),t),this.renderDecoration(r.a.createElement(N,null),a))}}]),a}(n.Component),F={EASY:{level:"Easy",rows:6,cols:6,bombs:5},NORMAL:{level:"Normal",rows:10,cols:10,bombs:20},HARD:{level:"Hard",rows:16,cols:24,bombs:100}};var T=function(e){return r.a.createElement("div",{className:"setting-container",onClick:function(){e.reset(e.boardSettings)}},"Reset ",r.a.createElement("span",{className:"reset-button"},"\xa0",r.a.createElement("span",{className:"reset-arrow"})))},M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={status:S.PLAY,boardSettings:F.EASY,flagCounter:F.EASY.bombs,gameCounter:1},n.updateFlagCounter=n.updateFlagCounter.bind(Object(c.a)(n)),n.setLevel=n.setLevel.bind(Object(c.a)(n)),n.setStatus=n.setStatus.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"updateFlagCounter",value:function(e){this.setState({flagCounter:this.state.boardSettings.bombs-e})}},{key:"setStatus",value:function(e){this.setState({status:e})}},{key:"setLevel",value:function(e){this.setState({boardSettings:e,status:S.PLAY,flagCounter:e.bombs,gameCounter:this.state.gameCounter+1})}},{key:"render",value:function(){var e=this.state,t=e.flagCounter,a=e.boardSettings,n=e.status,s=e.gameCounter;return r.a.createElement("div",{className:"main"},r.a.createElement(A,{flowers:100,grass:50}),r.a.createElement(w,{status:n}),r.a.createElement("div",{className:"settings"},r.a.createElement(y,{status:n}),r.a.createElement(O,{remainingFlags:t}),r.a.createElement(T,{boardSettings:a,reset:this.setLevel}),r.a.createElement(k,{levels:Object.values(F),chosenLevel:a,setLevel:this.setLevel})),r.a.createElement(C,{endGame:this.setStatus,updateCounter:this.updateFlagCounter,status:n,boardSettings:a,gameCounter:s}))}}]),a}(n.Component);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.ebd0f198.chunk.js.map